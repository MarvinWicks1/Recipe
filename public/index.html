<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Recipe Keeper</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8f9fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .nav {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .nav-btn {
            padding: 10px 20px;
            border: none;
            background: #3498db;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        .nav-btn.active {
            background: #2980b9;
        }

        .nav-btn:hover {
            background: #2980b9;
        }

        .section {
            display: none;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .section.active {
            display: block;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #2c3e50;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        .form-group textarea {
            height: 100px;
            resize: vertical;
        }

        .btn {
            background: #27ae60;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 10px;
        }

        .btn:hover {
            background: #229954;
        }

        .btn-secondary {
            background: #95a5a6;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .btn-danger {
            background: #e74c3c;
        }

        .btn-danger:hover {
            background: #c0392b;
        }

        .recipe-card {
            background: white;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-left: 4px solid #3498db;
        }

        .recipe-card h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .recipe-meta {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
            font-size: 14px;
            color: #7f8c8d;
        }

        .recipe-actions {
            margin-top: 15px;
        }

        .recipe-actions button {
            margin-right: 10px;
            margin-bottom: 5px;
        }

        .rating {
            display: flex;
            gap: 5px;
            margin: 10px 0;
        }

        .star {
            font-size: 20px;
            color: #ddd;
            cursor: pointer;
        }

        .star.active {
            color: #f39c12;
        }

        .shopping-list {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
        }

        .shopping-item {
            display: flex;
            align-items: center;
            padding: 5px 0;
            border-bottom: 1px solid #bdc3c7;
        }

        .shopping-item:last-child {
            border-bottom: none;
        }

        .shopping-item input[type="checkbox"] {
            margin-right: 10px;
        }

        .message {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            text-align: center;
        }

        .message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .message.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }
            
            .nav {
                flex-direction: column;
            }
            
            .recipe-meta {
                flex-direction: column;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üç≥ My Recipe Keeper</h1>
            <p>Save, rate, and organize your favorite recipes</p>
        </div>

        <div class="nav">
            <button class="nav-btn active" onclick="showSection('recipes')">My Recipes</button>
            <button class="nav-btn" onclick="showSection('add')">Add Recipe</button>
            <button class="nav-btn" onclick="showSection('shopping')">Shopping List</button>
        </div>

        <!-- Recipes Section -->
        <div id="recipes" class="section active">
            <h2>My Recipes</h2>
            <div id="recipesList">
                <!-- Recipes will be loaded here -->
            </div>
        </div>

        <!-- Add Recipe Section -->
        <div id="add" class="section">
            <h2>Add New Recipe</h2>
            <form id="recipeForm">
                <div class="form-group">
                    <label for="recipeName">Recipe Name *</label>
                    <input type="text" id="recipeName" required>
                </div>

                <div class="form-group">
                    <label for="recipeDescription">Description</label>
                    <textarea id="recipeDescription" placeholder="Brief description of the recipe..."></textarea>
                </div>

                <div class="form-group">
                    <label for="recipeIngredients">Ingredients</label>
                    <textarea id="recipeIngredients" placeholder="List ingredients (one per line)"></textarea>
                </div>

                <div class="form-group">
                    <label for="recipeInstructions">Instructions</label>
                    <textarea id="recipeInstructions" placeholder="Step-by-step cooking instructions"></textarea>
                </div>

                <div class="form-group">
                    <label for="recipeServings">Servings</label>
                    <input type="text" id="recipeServings" placeholder="e.g., 4 people">
                </div>

                <div class="form-group">
                    <label for="recipeTime">Cooking Time</label>
                    <input type="text" id="recipeTime" placeholder="e.g., 30 minutes">
                </div>

                <div class="form-group">
                    <label for="recipeSource">Source/URL</label>
                    <input type="url" id="recipeSource" placeholder="https://example.com/recipe">
                </div>

                <button type="submit" class="btn">Save Recipe</button>
                <button type="button" class="btn btn-secondary" onclick="clearForm()">Clear Form</button>
            </form>
        </div>

        <!-- Shopping List Section -->
        <div id="shopping" class="section">
            <h2>Shopping List</h2>
            <div class="form-group">
                <input type="text" id="newItem" placeholder="Add new item..." onkeypress="addItemOnEnter(event)">
                <button class="btn" onclick="addShoppingItem()">Add Item</button>
            </div>
            <div id="shoppingList" class="shopping-list">
                <!-- Shopping items will be loaded here -->
            </div>
            <button class="btn btn-secondary" onclick="clearShoppingList()">Clear All</button>
        </div>
    </div>

    <script>
        // Simple Recipe Keeper App
        class RecipeKeeper {
            constructor() {
                this.recipes = this.loadRecipes();
                this.shoppingList = this.loadShoppingList();
                this.init();
            }

            init() {
                this.renderRecipes();
                this.renderShoppingList();
                this.setupEventListeners();
            }

            setupEventListeners() {
                document.getElementById('recipeForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.addRecipe();
                });
            }

            addRecipe() {
                const recipe = {
                    id: Date.now(),
                    name: document.getElementById('recipeName').value,
                    description: document.getElementById('recipeDescription').value,
                    ingredients: document.getElementById('recipeIngredients').value.split('\n').filter(i => i.trim()),
                    instructions: document.getElementById('recipeInstructions').value.split('\n').filter(i => i.trim()),
                    servings: document.getElementById('recipeServings').value,
                    time: document.getElementById('recipeTime').value,
                    source: document.getElementById('recipeSource').value,
                    rating: 0,
                    dateAdded: new Date().toISOString()
                };

                this.recipes.push(recipe);
                this.saveRecipes();
                this.renderRecipes();
                this.clearForm();
                this.showMessage('Recipe saved successfully!', 'success');
            }

            renderRecipes() {
                const container = document.getElementById('recipesList');
                if (this.recipes.length === 0) {
                    container.innerHTML = '<p>No recipes yet. Add your first recipe!</p>';
                    return;
                }

                container.innerHTML = this.recipes.map(recipe => `
                    <div class="recipe-card">
                        <h3>${this.escapeHtml(recipe.name)}</h3>
                        <div class="recipe-meta">
                            ${recipe.servings ? `<span>üë• ${recipe.servings}</span>` : ''}
                            ${recipe.time ? `<span>‚è±Ô∏è ${recipe.time}</span>` : ''}
                            <span>üìÖ ${new Date(recipe.dateAdded).toLocaleDateString()}</span>
                        </div>
                        ${recipe.description ? `<p>${this.escapeHtml(recipe.description)}</p>` : ''}
                        <div class="rating">
                            <span>Rating: </span>
                            ${[1,2,3,4,5].map(i => 
                                `<span class="star ${i <= recipe.rating ? 'active' : ''}" 
                                     onclick="recipeKeeper.setRating(${recipe.id}, ${i})">‚òÖ</span>`
                            ).join('')}
                        </div>
                        ${recipe.ingredients.length > 0 ? `
                            <div>
                                <strong>Ingredients:</strong>
                                <ul>${recipe.ingredients.map(ing => `<li>${this.escapeHtml(ing)}</li>`).join('')}</ul>
                            </div>
                        ` : ''}
                        ${recipe.instructions.length > 0 ? `
                            <div>
                                <strong>Instructions:</strong>
                                <ol>${recipe.instructions.map(inst => `<li>${this.escapeHtml(inst)}</li>`).join('')}</ol>
                            </div>
                        ` : ''}
                        ${recipe.source ? `<p><strong>Source:</strong> <a href="${recipe.source}" target="_blank">${recipe.source}</a></p>` : ''}
                        <div class="recipe-actions">
                            <button class="btn" onclick="recipeKeeper.addToShoppingList(${recipe.id})">Add to Shopping List</button>
                            <button class="btn btn-secondary" onclick="recipeKeeper.editRecipe(${recipe.id})">Edit</button>
                            <button class="btn btn-danger" onclick="recipeKeeper.deleteRecipe(${recipe.id})">Delete</button>
                        </div>
                    </div>
                `).join('');
            }

            setRating(recipeId, rating) {
                const recipe = this.recipes.find(r => r.id === recipeId);
                if (recipe) {
                    recipe.rating = rating;
                    this.saveRecipes();
                    this.renderRecipes();
                }
            }

            addToShoppingList(recipeId) {
                const recipe = this.recipes.find(r => r.id === recipeId);
                if (recipe && recipe.ingredients.length > 0) {
                    recipe.ingredients.forEach(ingredient => {
                        if (ingredient.trim() && !this.shoppingList.includes(ingredient.trim())) {
                            this.shoppingList.push(ingredient.trim());
                        }
                    });
                    this.saveShoppingList();
                    this.renderShoppingList();
                    this.showMessage('Ingredients added to shopping list!', 'success');
                }
            }

            editRecipe(recipeId) {
                const recipe = this.recipes.find(r => r.id === recipeId);
                if (recipe) {
                    document.getElementById('recipeName').value = recipe.name;
                    document.getElementById('recipeDescription').value = recipe.description;
                    document.getElementById('recipeIngredients').value = recipe.ingredients.join('\n');
                    document.getElementById('recipeInstructions').value = recipe.instructions.join('\n');
                    document.getElementById('recipeServings').value = recipe.servings;
                    document.getElementById('recipeTime').value = recipe.time;
                    document.getElementById('recipeSource').value = recipe.source;
                    
                    // Remove the recipe and show add form
                    this.recipes = this.recipes.filter(r => r.id !== recipeId);
                    this.saveRecipes();
                    this.renderRecipes();
                    showSection('add');
                }
            }

            deleteRecipe(recipeId) {
                if (confirm('Are you sure you want to delete this recipe?')) {
                    this.recipes = this.recipes.filter(r => r.id !== recipeId);
                    this.saveRecipes();
                    this.renderRecipes();
                    this.showMessage('Recipe deleted!', 'success');
                }
            }

            addShoppingItem() {
                const input = document.getElementById('newItem');
                const item = input.value.trim();
                if (item && !this.shoppingList.includes(item)) {
                    this.shoppingList.push(item);
                    this.saveShoppingList();
                    this.renderShoppingList();
                    input.value = '';
                }
            }

            renderShoppingList() {
                const container = document.getElementById('shoppingList');
                if (this.shoppingList.length === 0) {
                    container.innerHTML = '<p>Your shopping list is empty.</p>';
                    return;
                }

                container.innerHTML = this.shoppingList.map((item, index) => `
                    <div class="shopping-item">
                        <input type="checkbox" id="item-${index}" onchange="recipeKeeper.toggleShoppingItem(${index})">
                        <label for="item-${index}">${this.escapeHtml(item)}</label>
                        <button class="btn btn-danger" onclick="recipeKeeper.removeShoppingItem(${index})" style="margin-left: auto; padding: 5px 10px;">√ó</button>
                    </div>
                `).join('');
            }

            toggleShoppingItem(index) {
                // Simple toggle - you could add more functionality here
            }

            removeShoppingItem(index) {
                this.shoppingList.splice(index, 1);
                this.saveShoppingList();
                this.renderShoppingList();
            }

            clearShoppingList() {
                if (confirm('Clear all items from shopping list?')) {
                    this.shoppingList = [];
                    this.saveShoppingList();
                    this.renderShoppingList();
                }
            }

            clearForm() {
                document.getElementById('recipeForm').reset();
            }

            showMessage(message, type) {
                // Remove existing messages
                const existing = document.querySelector('.message');
                if (existing) existing.remove();

                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${type}`;
                messageDiv.textContent = message;
                
                document.querySelector('.container').insertBefore(messageDiv, document.querySelector('.nav').nextSibling);
                
                setTimeout(() => {
                    if (messageDiv.parentNode) {
                        messageDiv.remove();
                    }
                }, 3000);
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            loadRecipes() {
                const saved = localStorage.getItem('recipeKeeper-recipes');
                return saved ? JSON.parse(saved) : [];
            }

            saveRecipes() {
                localStorage.setItem('recipeKeeper-recipes', JSON.stringify(this.recipes));
            }

            loadShoppingList() {
                const saved = localStorage.getItem('recipeKeeper-shopping');
                return saved ? JSON.parse(saved) : [];
            }

            saveShoppingList() {
                localStorage.setItem('recipeKeeper-shopping', JSON.stringify(this.shoppingList));
            }
        }

        // Global functions
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active class from all nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionName).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }

        function addItemOnEnter(event) {
            if (event.key === 'Enter') {
                recipeKeeper.addShoppingItem();
            }
        }

        function clearForm() {
            recipeKeeper.clearForm();
        }

        // Initialize the app
        const recipeKeeper = new RecipeKeeper();
    </script>
</body>
</html>